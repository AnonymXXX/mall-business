(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-699d919f"],{"4b71":function(e,t,n){"use strict";n("f1d9")},"7b29":function(e,t,n){"use strict";n.r(t);var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("a-button",{staticClass:"add-btn",on:{click:e.addCategory}},[e._v("新增")]),!0!==e.isLoading?n("a-table",{attrs:{pagination:Object.assign({},e.pagination,{total:e.total}),bordered:"","data-source":e.dataSource,columns:e.columns},on:{change:e.onChange},scopedSlots:e._u([{key:"operation",fn:function(t,a){return[e.dataSource.length?n("a-button",{on:{click:function(){return e.onEdit(a.key)}}},[e._v("编辑")]):e._e(),n("a-divider",{attrs:{type:"vertical"}}),e.dataSource.length?n("a-popconfirm",{attrs:{title:"确定要删除？"},on:{confirm:function(){return e.onDelete(a.key)}}},[n("a-button",[e._v("删除")])],1):e._e()]}}],null,!1,3575634499)}):n("Loading"),n("FormModal",{attrs:{visible:e.visible,id:e.id,type:e.type},on:{changeVisible:e.changeVisible,getCategory:e.getCategory,addCategory:e.addCategory}})],1)},r=[],i=(n("d81d"),n("b0c0"),n("96cf"),n("1da1")),o=n("5530"),s=n("2f62"),c=n("3a5e"),u=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("a-modal",{attrs:{title:e.type.text+"类目"},on:{ok:e.handleOk,cancel:e.cancel},model:{value:e.visible,callback:function(t){e.visible=t},expression:"visible"}},[n("a-form-model",{ref:"ruleForm",attrs:{model:e.form,rules:e.rules,"label-col":e.labelCol,"wrapper-col":e.wrapperCol}},[n("a-form-model-item",{ref:"name",attrs:{label:"类目名称",prop:"name"}},[n("a-input",{staticStyle:{width:"130%"},on:{blur:function(){e.$refs.name.onFieldBlur()}},model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}})],1),n("a-form-model-item",{ref:"c_items",attrs:{label:"子类名称",prop:"c_items"}},[n("a-input",{staticStyle:{width:"130%"},on:{blur:function(){e.$refs.c_items.onFieldBlur()}},model:{value:e.form.c_items,callback:function(t){e.$set(e.form,"c_items",t)},expression:"form.c_items"}})],1)],1)],1)],1)},l=[],d=(n("d3b7"),n("25f0"),n("dde5")),m={data:function(){return{labelCol:{span:4},wrapperCol:{span:14},form:{name:"",c_items:""},rules:{name:[{required:!0,message:"Please input name",trigger:"blur"}],c_items:[{required:!0,message:"Please input c_items",trigger:"blur"}]}}},computed:Object(o["a"])({},Object(s["b"])(["category"])),props:["visible","id","type"],methods:{handleOk:function(e){var t=this;this.$refs.ruleForm.validate(function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(n){var a,r,i,o,s,c,u,l;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!n){e.next=21;break}if(t.$emit("changeVisible",!1),t.$store.commit("setIsLoading",!0),a=t.form,r=a.name,i=a.c_items,1!==t.type.id){e.next=14;break}return o=(Date.now()+Math.random().toString().substr(5,10)).substr(15),t.$store.commit("setIsLoading",!1),e.next=9,d["a"].addCategory(o,r,i);case 9:s=e.sent,c=s.status,"success"===c&&(t.$notification.success({message:"添加成功",duration:2.5}),t.$refs.ruleForm.resetFields(),t.$emit("getCategory")),e.next=19;break;case 14:return e.next=16,d["a"].editCategory(t.id,r,i);case 16:u=e.sent,l=u.status,"success"===l&&(t.$notification.success({message:"修改成功",duration:2.5}),t.$refs.ruleForm.resetFields(),t.$emit("getCategory"));case 19:e.next=23;break;case 21:return console.log("error submit!!"),e.abrupt("return",!1);case 23:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())},cancel:function(e){console.log("cancel"),this.$emit("changeVisible",!1)}}},g=m,f=n("2877"),p=Object(f["a"])(g,u,l,!1,null,null,null),b=p.exports,h=[{title:"类目名称",dataIndex:"name"},{title:"操作",dataIndex:"operation",scopedSlots:{customRender:"operation"}}],v={components:{Loading:c["a"],FormModal:b},computed:Object(o["a"])(Object(o["a"])({},Object(s["b"])(["category","isLoading","current"])),{},{total:function(){return this.category.length}}),data:function(){return{columns:h,dataSource:[],visible:!1,id:0,type:{text:"",id:0},pagination:{defaultPageSize:5,current:1,hideOnSinglePage:!0}}},methods:{addCategory:function(e){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:e.name,e.c_items,t.visible=!0,t.type={text:"添加",id:1};case 3:case"end":return n.stop()}}),n)})))()},onEdit:function(e){this.visible=!0,this.id=e,this.type={text:"编辑",id:2}},onChange:function(e){var t=this,n=e.current;this.$store.commit("setIsLoading",!0),this.$store.commit("setCurrent",n),this.pagination.current=this.current,setTimeout((function(){t.$store.commit("setIsLoading",!1)}),300)},changeVisible:function(e){this.visible=e},onDelete:function(e){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function n(){var a,r;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.next=2,d["a"].removeCategory(e);case 2:a=n.sent,r=a.status,"success"===r&&(t.$notification.success({message:"删除成功",duration:2.5}),t.getCategory());case 5:case"end":return n.stop()}}),n)})))()},getCategory:function(){var e=this;this.$store.commit("setIsLoading",!0),this.$store.dispatch("getCategory",{});var t=[];setTimeout((function(){e.category.length&&e.category.map((function(e){t.push({id:e.id,key:e.id,name:e.name})})),e.dataSource=t,e.$store.commit("setIsLoading",!1)}),300)}},created:function(){this.$store.commit("setCurrent",1),this.getCategory()}},y=v,$=(n("4b71"),Object(f["a"])(y,a,r,!1,null,"030c96fa",null));t["default"]=$.exports},f1d9:function(e,t,n){}}]);
//# sourceMappingURL=chunk-699d919f.8ce8129d.js.map