(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-722f4017"],{"0b6f":function(e,t,r){"use strict";r("d08f")},"13e6":function(e,t,r){"use strict";r("a2a5")},3375:function(e,t,r){"use strict";r("bc69")},"6a6c":function(e,t,r){"use strict";r.r(t);var o=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"add-list"},[r("Steps"),!0!==e.isLoading?r("div",[r("GoodsBaseInfo",{directives:[{name:"show",rawName:"v-show",value:0===e.step,expression:"step === 0"}],attrs:{form:e.form}}),r("GoodsSaleInfo",{directives:[{name:"show",rawName:"v-show",value:1===e.step,expression:"step === 1"}],attrs:{form1:e.form}})],1):r("Loading")],1)},a=[],n=r("5530"),i=r("2f62"),s=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("a-steps",{attrs:{current:e.step,size:"default"}},[r("a-step",{attrs:{title:"填写商品基本信息"}}),r("a-step",{attrs:{title:"填写商品销售信息"}})],1)},l=[],c={computed:Object(n["a"])({},Object(i["b"])(["step"]))},u=c,f=(r("13e6"),r("2877")),p=Object(f["a"])(u,s,l,!1,null,"1e5d3af2",null),m=p.exports,d=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("a-form-model",{ref:"ruleForm",attrs:{model:e.form,rules:e.rules,"label-col":e.labelCol,"wrapper-col":e.wrapperCol}},[r("a-form-model-item",{ref:"title",attrs:{label:"副标题",prop:"title"}},[r("a-input",{on:{blur:function(){e.$refs.title.onFieldBlur()}},model:{value:e.form.title,callback:function(t){e.$set(e.form,"title",t)},expression:"form.title"}})],1),r("a-form-model-item",{attrs:{label:"商品描述",prop:"desc"}},[r("a-input",{staticStyle:{resize:"none"},attrs:{type:"textarea"},model:{value:e.form.desc,callback:function(t){e.$set(e.form,"desc",t)},expression:"form.desc"}})],1),r("a-form-model-item",{ref:"category",attrs:{label:"商品类目",prop:"category"}},[r("a-select",{attrs:{placeholder:"请选择商品类目"},on:{blur:function(){e.$refs.category.onFieldBlur()}},model:{value:e.form.category,callback:function(t){e.$set(e.form,"category",t)},expression:"form.category"}},e._l(e.category,(function(t){return r("a-select-option",{key:t.id},[e._v(" "+e._s(t.name)+" ")])})),1)],1),r("a-form-model-item",{attrs:{label:"选择所属子类目"}},[r("a-select",{attrs:{placeholder:"选择所属子类目"},model:{value:e.form.c_items,callback:function(t){e.$set(e.form,"c_items",t)},expression:"form.c_items"}},[r("a-select-option",{attrs:{value:"test3"}},[e._v(" test1 ")])],1)],1),r("a-form-model-item",{attrs:{label:"选择标签：",prop:"tags"}},[r("a-select",{attrs:{mode:"tags","token-separators":[","],placeholder:"请设置标签"},model:{value:e.form.tags,callback:function(t){e.$set(e.form,"tags",t)},expression:"form.tags"}},e._l(e.form.tags,(function(t){return r("a-select-option",{key:t},[e._v(" "+e._s(t)+" ")])})),1)],1),r("a-form-model-item",{attrs:{"wrapper-col":{span:12,offset:4}}},[r("a-button",{attrs:{type:"primary"},on:{click:e.onNext}},[e._v(" 下一步 ")])],1)],1)},b=[],g={computed:Object(n["a"])({},Object(i["b"])(["category"])),props:["form"],data:function(){return{labelCol:{span:4},wrapperCol:{span:14},rules:{title:[{required:!0,message:"Please input your title",trigger:"blur"}],tags:[{required:!0,message:"Please input your tags",trigger:"blur"}],category:[{required:!0,message:"Please input your category",trigger:"blur"}]}}},methods:{onNext:function(){var e=this;this.$refs.ruleForm.validate((function(t){if(!t)return console.log("error submit!!"),!1;e.$store.commit("changeStep",1)}))}},created:function(){this.$store.dispatch("getCategory",{})}},v=g,h=(r("3375"),Object(f["a"])(v,d,b,!1,null,"0d2da200",null)),y=h.exports,w=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("a-form-model",{ref:"ruleForm",attrs:{model:e.form,rules:e.rules,"label-col":e.labelCol,"wrapper-col":e.wrapperCol}},[r("a-form-model-item",{ref:"price",attrs:{label:"商品售价",prop:"price"}},[r("a-input",{on:{blur:function(){e.$refs.price.onFieldBlur()}},model:{value:e.form.price,callback:function(t){e.$set(e.form,"price",t)},expression:"form.price"}})],1),r("a-form-model-item",{ref:"price_off",attrs:{label:"商品折扣价",prop:"price_off"}},[r("a-input",{on:{blur:function(){e.$refs.price_off.onFieldBlur()}},model:{value:e.form.price_off,callback:function(t){e.$set(e.form,"price_off",t)},expression:"form.price_off"}})],1),r("a-form-model-item",{ref:"inventory",attrs:{label:"购买上限",prop:"inventory"}},[r("a-input",{on:{blur:function(){e.$refs.inventory.onFieldBlur()}},model:{value:e.form.inventory,callback:function(t){e.$set(e.form,"inventory",t)},expression:"form.inventory"}})],1),r("a-form-model-item",{ref:"unit",attrs:{label:"计量单位",prop:"unit"}},[r("a-input",{on:{blur:function(){e.$refs.unit.onFieldBlur()}},model:{value:e.form.unit,callback:function(t){e.$set(e.form,"unit",t)},expression:"form.unit"}})],1),r("a-form-model-item",{style:{marginBottom:"0px"},attrs:{label:"商品图片"}},[r("a-upload",{attrs:{actiom:e.uploadUrl,"list-type":"picture-card","file-list":e.fileList},on:{preview:e.handlePreview,change:e.handleChange}},[e.fileList.length<8?r("div",[r("a-icon",{attrs:{type:"plus"}}),r("div",{staticClass:"ant-upload-text"},[e._v(" Upload ")])],1):e._e()]),r("a-modal",{attrs:{visible:e.previewVisible,footer:null},on:{cancel:e.handleCancel}},[r("img",{staticStyle:{width:"100%"},attrs:{alt:"example",src:e.previewImage}})])],1),r("a-form-model-item",{attrs:{label:" ",colon:!1}},[r("label",{style:{cursor:"pointer",color:"#000000D9"},attrs:{for:"is-sell"}},[e._v(" 是否上架： "),r("a-checkbox",{attrs:{status:e.form.status,id:"is-sell"},on:{change:e.onChange}})],1),r("a-button",{style:{marginLeft:"50px"},attrs:{type:"primary"},on:{click:e.onPrev}},[e._v(" 上一步 ")]),r("a-button",{style:{marginLeft:"30px"},attrs:{type:"primary"},on:{click:e.onSubmit}},[e._v(" 完成 ")])],1)],1)},_=[],x=(r("99af"),r("d3b7"),r("96cf"),r("1da1")),$=r("dde5"),k=r("cedd");function C(e){return new Promise((function(t,r){var o=new FileReader;o.readAsDataURL(e),o.onload=function(){return t(o.result)},o.onerror=function(e){return r(e)}}))}var L={props:["form1"],computed:{uploadUrl:function(){return"".concat(k["b"]).concat(k["c"].upload,"?appkey=").concat(k["a"])}},data:function(){return{labelCol:{span:4},wrapperCol:{span:14},form:{price:"",price_off:"",inventory:null,unit:"",tags:[],status:!1},rules:{price:[{required:!0,message:"Please input your sale price",trigger:"blur"}],price_off:[{required:!0,message:"Please input your discount price",trigger:"blur"}],inventory:[{required:!0,message:"Please input your inventory",trigger:"blur"}],unit:[{required:!0,message:"Please input your unit",trigger:"blur"}]},previewVisible:!1,previewImage:"",fileList:[]}},methods:{onPrev:function(){this.$store.commit("changeStep",0)},onSubmit:function(){var e=this;this.$refs.ruleForm.validate(function(){var t=Object(x["a"])(regeneratorRuntime.mark((function t(r){var o,a,n,i,s,l,c,u,f,p,m,d,b;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!r){t.next=13;break}return o=e.form1,a=o.title,n=o.desc,i=o.category,s=o.c_items,l=o.tags,c=e.form,u=c.price,f=c.price_off,p=c.unit,m=c.status,d=c.inventory,e.fileList,m=m?1:0,t.next=7,$["a"].addGoods(a,i,l,u,f,p,m,d,n,s);case 7:b=t.sent,e.$store.commit("changeStep",2),"success"===b.status?(e.$notification.success({message:"添加成功",duration:2.5}),e.$router.push("/productList")):e.$message.error("添加失败"),e.$store.commit("changeStep",0),t.next=15;break;case 13:return console.log("error submit!!"),t.abrupt("return",!1);case 15:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())},handleCancel:function(){this.previewVisible=!1},handlePreview:function(e){var t=this;return Object(x["a"])(regeneratorRuntime.mark((function r(){return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:if(e.url||e.preview){r.next=4;break}return r.next=3,C(e.originFileObj);case 3:e.preview=r.sent;case 4:t.previewImage=e.url||e.preview,t.previewVisible=!0;case 6:case"end":return r.stop()}}),r)})))()},onChange:function(){this.form.status=!this.form.status},handleChange:function(e){var t=e.fileList;this.fileList=t}}},S=L,j=(r("0b6f"),Object(f["a"])(S,w,_,!1,null,"e7eaf554",null)),O=j.exports,F=r("3a5e"),P={data:function(){return{form:{title:"",c_items:"",tags:[],categoryArr:[]}}},computed:Object(n["a"])({},Object(i["b"])(["step","isLoading"])),components:{Steps:m,GoodsBaseInfo:y,GoodsSaleInfo:O,Loading:F["a"]},created:function(){var e=this;this.$store.commit("setIsLoading",!0),this.$store.commit("changeStep",0),setTimeout((function(){e.$store.commit("setIsLoading",!1)}),300)}},B=P,I=Object(f["a"])(B,o,a,!1,null,null,null);t["default"]=I.exports},"99af":function(e,t,r){"use strict";var o=r("23e7"),a=r("d039"),n=r("e8b5"),i=r("861d"),s=r("7b0b"),l=r("50c4"),c=r("8418"),u=r("65f0"),f=r("1dde"),p=r("b622"),m=r("2d00"),d=p("isConcatSpreadable"),b=9007199254740991,g="Maximum allowed index exceeded",v=m>=51||!a((function(){var e=[];return e[d]=!1,e.concat()[0]!==e})),h=f("concat"),y=function(e){if(!i(e))return!1;var t=e[d];return void 0!==t?!!t:n(e)},w=!v||!h;o({target:"Array",proto:!0,forced:w},{concat:function(e){var t,r,o,a,n,i=s(this),f=u(i,0),p=0;for(t=-1,o=arguments.length;t<o;t++)if(n=-1===t?i:arguments[t],y(n)){if(a=l(n.length),p+a>b)throw TypeError(g);for(r=0;r<a;r++,p++)r in n&&c(f,p,n[r])}else{if(p>=b)throw TypeError(g);c(f,p++,n)}return f.length=p,f}})},a2a5:function(e,t,r){},bc69:function(e,t,r){},d08f:function(e,t,r){}}]);
//# sourceMappingURL=chunk-722f4017.56b732c5.js.map