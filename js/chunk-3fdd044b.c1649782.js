(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-3fdd044b"],{"376c":function(e,t,n){},"45e5":function(e,t,n){"use strict";n("4825")},4825:function(e,t,n){},"960b":function(e,t,n){},e46b:function(e,t,n){"use strict";n.r(t);var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"goods-list"},[n("GoodsSearch"),n("GoodsTable")],1)},s=[],o=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"search-wrapper"},[n("div",{staticClass:"search-header"},[n("div",{staticClass:"search-input"},[e._v(" 搜索关键字："),[n("a-input",{attrs:{placeholder:"请输入关键字"},on:{pressEnter:e.pressEnter},model:{value:e.value,callback:function(t){e.value=t},expression:"value"}})]],2),n("div",{staticClass:"select-list"},[e._v(" 商品类目："),n("a-select",{staticStyle:{width:"200px"},attrs:{placeholder:"请选择商品类目"},on:{change:e.handleChange},model:{value:e.type,callback:function(t){e.type=t},expression:"type"}},e._l(e.categoryArr,(function(t){return n("a-select-option",{key:t.id},[e._v(" "+e._s(t.name)+" ")])})),1),n("a-button",{attrs:{type:"primary"},on:{click:e.onSearch}},[e._v(" 搜索 ")])],1),n("a-button",{on:{click:e.addGoods}},[e._v("新增商品")])],1)])},r=[],i=(n("498a"),n("96cf"),n("1da1")),c=n("5530"),u=n("2f62"),d=n("dde5"),l=n("4260"),m={computed:Object(c["a"])(Object(c["a"])({},Object(u["b"])(["category"])),{},{categoryArr:function(){var e=this.category;return e.unshift({id:-1,name:"全部"}),e}}),data:function(){return{filterOption:"",value:"",type:"全部",size:6}},methods:{onSearch:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.$store.commit("setIsLoading",!0),Object(l["c"])(e,e.type,e.value.trim()),setTimeout((function(){e.$store.commit("setIsLoading",!1)}),500);case 3:case"end":return t.stop()}}),t)})))()},addGoods:function(){this.$router.push("/productAdd")},pressEnter:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){var n,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(n=e.value.trim(),n){t.next=3;break}return t.abrupt("return");case 3:return t.next=5,d["a"].getGoodsList({searchWord:n});case 5:a=t.sent,console.log(a);case 7:case"end":return t.stop()}}),t)})))()},handleChange:function(e){var t=this;this.$store.commit("setIsLoading",!0),this.$store.commit("setCurrent",1),Object(l["c"])(this,e,this.value.trim()),setTimeout((function(){t.$store.commit("setIsLoading",!1)}),500)}},created:function(){this.$store.dispatch("getCategory",{})}},f=m,g=(n("f303"),n("2877")),h=Object(g["a"])(f,o,r,!1,null,"8ac5fc40",null),p=h.exports,v=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[!0!==e.isLoading?n("a-table",{style:{fontSize:"12px"},attrs:{"row-selection":{selectedRowKeys:e.selectedRowKeys,onChange:e.onSelectChange},columns:e.columns,"data-source":e.goodsList,pagination:Object.assign({},e.pagination,{total:e.total,current:e.current})},on:{change:e.onChange}}):e._e(),!0!==e.isLoading?n("div",{staticClass:"control-menu"},[n("a-button",{on:{click:e.sell}},[e._v("上架")]),n("a-button",{on:{click:e.offShelf}},[e._v("下架")]),n("a-button",{on:{click:e.remove}},[e._v("删除")])],1):e._e(),!0===e.isLoading?n("Loading"):e._e()],1)},b=[],w=(n("d81d"),n("d3b7"),n("3ca3"),n("ddb0"),n("3a5e")),x=[{title:"id",dataIndex:"id"},{title:"标题",dataIndex:"title"},{title:"描述",dataIndex:"desc"},{title:"类目",dataIndex:"category"},{title:"预售价",dataIndex:"price"},{title:"折扣价",dataIndex:"price_off"},{title:"标签",dataIndex:"tags"},{title:"购买上限",dataIndex:"inventory"},{title:"状态",dataIndex:"status"}],y={components:{Loading:w["a"]},data:function(){return{pagination:{defaultPageSize:6,hideOnSinglePage:!0},size:6,columns:x,selectedRowKeys:[]}},computed:Object(c["a"])(Object(c["a"])({},Object(u["b"])(["goodsList","total","isLoading","total","current","isSearch"])),{},{hasSelected:function(){return this.selectedRowKeys.length>0}}),methods:{sell:function(){console.warn("上架功能目前还没有实现"),this.$notification.warning({message:"上架功能目前还没有实现",duration:2.5})},offShelf:function(){console.warn("下架功能目前还没有实现"),this.$notification.warning({message:"下架功能目前还没有实现",duration:2.5})},remove:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){var n,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.$store.commit("setIsLoading",!0),!(e.selectedRowKeys.length<=0)){t.next=5;break}return e.$notification.info({message:"请选择删除的商品",duration:2.5}),e.$store.commit("setIsLoading",!1),t.abrupt("return");case 5:return t.next=7,d["a"].removeGoods(e.selectedRowKeys);case 7:return n=t.sent,t.next=10,Promise.all(n);case 10:a=t.sent,a.map((function(t){var n=t.status;if("success"!==n)return!1;e.$notification.success({message:"删除成功",duration:2.5}),e.onRender()})),e.$store.commit("setIsLoading",!1);case 13:case"end":return t.stop()}}),t)})))()},onSelectChange:function(e){this.selectedRowKeys=e},onRender:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){var n,a,s,o;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.$store.commit("setIsLoading",!0),e.$store.commit("setCurrent",1),t.next=4,d["a"].getGoodsList({page:e.current,size:e.size});case 4:n=t.sent,a=n.data,s=n.status,"success"===s&&(e.$store.commit("setTotal",a.total),o=Object(l["b"])(a.data,"key","category","status","tags"),e.$store.commit("setGoodsList",o)),setTimeout((function(){e.$store.commit("setIsLoading",!1)}),300);case 9:case"end":return t.stop()}}),t)})))()},onChange:function(e){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function n(){var a,s,o,r;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return a=e.current,t.$store.commit("setCurrent",a),t.pagination.current=a,t.$store.commit("setIsLoading",!0),n.next=6,d["a"].getGoodsList({page:t.current,size:t.size});case 6:s=n.sent,o=s.data,s.status,r=Object(l["b"])(o.data,"key","category","status","tags"),t.$store.commit("setGoodsList",r),setTimeout((function(){t.$store.commit("setIsLoading",!1)}),300);case 12:case"end":return n.stop()}}),n)})))()}},created:function(){this.onRender()}},$=y,L=(n("eccf"),Object(g["a"])($,v,b,!1,null,"3a9ff610",null)),O=L.exports,k={components:{GoodsSearch:p,GoodsTable:O}},I=k,R=(n("45e5"),Object(g["a"])(I,a,s,!1,null,"45564a44",null));t["default"]=R.exports},eccf:function(e,t,n){"use strict";n("376c")},f303:function(e,t,n){"use strict";n("960b")}}]);
//# sourceMappingURL=chunk-3fdd044b.c1649782.js.map